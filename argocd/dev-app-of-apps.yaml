# ============================================================
# DEV 环境 App of Apps 配置 (独立部署模式)
# ============================================================
# 
# 📝 学习说明:
# 这是重构后的 DEV 环境专用 App of Apps 配置
# 只管理 DEV 环境相关的应用，与 SIT 环境完全分离
#
# 🔧 配置特点:
# - 仅从 dev 分支拉取配置
# - 部署到原有的 argocd 命名空间
# - 只管理 DEV 相关的应用定义
#
# 🌟 重构优势:
# - 环境隔离，避免交叉影响
# - 分支策略清晰，易于管理
# - 符合企业级 GitOps 最佳实践
# ============================================================

apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: dev-app-of-apps
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/1979447992/project-gitops-config.git
    targetRevision: dev  # Only DEV branch
    path: argocd/applications
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
# ============================================================
# SIT ç¯å¢ƒ Microservice1 åº”ç”¨é…ç½®
# ============================================================
# 
# ğŸ“ å­¦ä¹ è¯´æ˜:
# è¿™æ˜¯ SIT ç¯å¢ƒä¸“ç”¨çš„ microservice1 åº”ç”¨å®šä¹‰
# å®Œå…¨ç‹¬ç«‹äº DEV ç¯å¢ƒï¼Œä½¿ç”¨ sit åˆ†æ”¯çš„é…ç½®
#
# ğŸ”§ é…ç½®ç‰¹ç‚¹:
# - éƒ¨ç½²åˆ° microservice1-sit å‘½åç©ºé—´
# - ä½¿ç”¨ SIT ç¯å¢ƒä¸“ç”¨çš„ Helm values
# - ç‹¬ç«‹çš„èµ„æºç®¡ç†å’Œé…ç½®
# ============================================================

apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: microservice1-sit
  namespace: argocd-sit
spec:
  project: default
  source:
    repoURL: https://github.com/1979447992/project-gitops-config.git
    targetRevision: sit
    path: charts/microservice1
    helm:
      valueFiles:
        - ../../environments/sit/microservice1-values.yaml
  destination:
    server: https://kubernetes.default.svc
    namespace: microservice1-sit
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - ServerSideApply=true
# ============================================================
# SIT ç¯å¢ƒ App of Apps é…ç½®
# ============================================================
# 
# ğŸ“ å­¦ä¹ è¯´æ˜:
# è¿™æ˜¯ SIT ç¯å¢ƒä¸“ç”¨çš„ App of Apps æ¨¡å¼é…ç½®
# åªç®¡ç† SIT ç¯å¢ƒç›¸å…³çš„åº”ç”¨ï¼Œå®Œå…¨ç‹¬ç«‹äº DEV ç¯å¢ƒ
#
# ğŸ”§ é…ç½®ç‰¹ç‚¹:
# - ä»…ä» sit åˆ†æ”¯æ‹‰å–é…ç½®
# - éƒ¨ç½²åˆ° argocd-sit å‘½åç©ºé—´
# - åªç®¡ç† SIT ç›¸å…³çš„åº”ç”¨å®šä¹‰
#
# ğŸŒŸ App of Apps æ¨¡å¼ä¼˜åŠ¿:
# - ç»Ÿä¸€ç®¡ç†å¤šä¸ªåº”ç”¨çš„éƒ¨ç½²
# - å£°æ˜å¼é…ç½®ï¼Œæ˜“äºç»´æŠ¤
# - æ”¯æŒç¯å¢ƒç‰¹å®šçš„åº”ç”¨ç»„åˆ
# ============================================================

apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: sit-app-of-apps
  namespace: argocd-sit
spec:
  project: default
  source:
    repoURL: https://github.com/1979447992/project-gitops-config.git
    targetRevision: sit  # Only SIT branch
    path: argocd-sit/applications
  destination:
    server: https://kubernetes.default.svc
    namespace: argocd-sit
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true